<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>PANDA data repository</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>How to use Star Tribune's PANDA</h1>
        </header>
        <hr>

        <section id="main_content">



<h2>What is PANDA?</h2> 
<p>PANDA is a warehouse for storing and searching datasets. Two key features that set it apart from Uniquery are that anyone can upload a dataset and that you can export your search result (or even the whole dataset) into a .csv file. So if you have some data from your beat that you want to put in a central repository (to ensure it doesn't get lost and/or to make it accessible to others), this is the ideal place to put it.</p>
<p>PANDA is an open-source application built by data journalists and made public thanks to a Knight Foundation grant. Read more about it here: http://pandaproject.net/</p>

<h2>What data is on there?</h2>
<p>It will be an ever-changing animal, but here are the ones you'll most likely be looking for: MNCIS criminal convictions (updated monthly), MNCIS civil court judgments (updated monthly), state prisoner records and jail bookings from all county jails (updated annually), birth certificates and death certificates (updated annually), voter registration data (updated quarterly), Hennepin County foreclosures (updated monthly). You'll also find some public payroll data from the state, University of Minnesota and metro counties, non-profit financial data, public school enrollment by race, and a bunch of other things.</p>


<h2>How can I access it?</h2>
<p>A link to it will be on StribSource under "Databases". The direct link is <a href="http://panda.star.local/#search/all">http://panda.star.local/#search/all</a>. This is not accessible if you are outside the Strib network. There will be a generic login that anyone in the newsroom can use; if you don't have it talk to MaryJo Webster or Dan Barnes. If you plan on uploading your own datasets, please ask MaryJo or Dan to create a personalized login for you.</p>

<h2>How to search:</h2>
<p>There are instructions built into PANDA (see the link on the main page that says "How to make advanced searches.") The directions there include basic directions, too. But here are the highlights…</p>
<p>At the very top of the page -- in the black bar -- you'll see the key links for getting around PANDA. The default page is the one called "Search." The "Find a dataset"  link is the best way to navigate down to a specific dataset. The "Upload" link is where you go for uploading your own data (more about that below)</p>

<p>On the "Search" page:</p>
<ul>
<li>On the main page, you'll see a big search box for "Search all the data." This works just like Google. However, this might not be the best option because it will search across every table and every single column and return a huge volume of results.</li>
<li>You can limit your search to a group of datasets by selecting a category from the pull-down menu to the left of that big search box. For example, selecting "Public Salaries" will allow you to run one search across all county government salary data.</li> 
</ul>

<p>On the "Find a dataset" page:</p>
<ul>
<li>When you click on "Find a dataset", you'll get a pull-down menu showing the different categories that have datasets in them. Either navigate to the category you want or select "All datasets"
Either way, you'll get a list of datasets.</li>
<li>Click on the name of the dataset you want, and it will bring up the specific page for that dataset. This shows a preview of the data and has the "metadata" down below (related links, related files, description, history, etc). There is a search box at the top of the page -- this will search all the columns in this dataset. To search on specific columns (such as a lastname), click on <strong>"More search options"</strong> right below the big search box.</li>
<li>You can pick which column(s) you want to search. Just remember that the more columns you add, the more it will narrow your results.(that might be good or bad, depending on how you're searching)</li>
<li>Also note that most of these will say "is like"  -- that means that it will do a broad search. If you put "Smith" in the lastname field, you'll get people will last name of "Frahm-Smith", "Kortz-Smith", "Smith", etc.</li>
<li>If you're searching a column that has a numeric value, it will give you options on the search to make it exact ("is") or before ("is less than or equal to") or after ("is greater than or equal to") or allow you to set a range.</li>
</ul>

<p>Sorting:</p>
<p>PANDA does not support sorting data via its web interface. This is a trade-off made for having a fast search. If you need to sort your results, only option is to download the results to Excel and sort there.</p>

<p>Download data:</p>
<p>You will likely find what you need without having to download the results. But here are the directions in case you do want to download.</p>
<p>When you have results, you will see a button just above your results --"Export search results to CSV." This means it will spit out a comma-separated values file. It may take a little time for PANDA to create your export. It will give you a notification in the notification window at the top of the page, and also send an email when the export is complete. You'll be able to save the file either from that notification window or from the email message. Once you have the file saved to your computer, you can open it directly with Excel.</p>

<p>Subscribe to searches:</p>
<p>PANDA makes it possible to subscribe to a search -- much like Google Alerts -- so that you will be notified whenever new data appears which matches your query.  To do this, first run the search that you want. If you want to be alerted any time a name appears in any of the datasets on PANDA, then make sure to run the search on the main search page (so that you're searching all datasets). Then on the results page it will give you a button to "subscribe to search results."  The most likely database where this would come in handy is the MNCIS criminal convictions, which are updated every month.</p>

<h2>Uploading data:</h2>
<p>There are two ways to upload data -- one is to upload an entirely new dataset; the second is to add more data to an existing table. The first part of the directions cover how to upload a new dataset. Look farther down for how to add to an existing table.</p>
<p>First thing you need to do is prep your data. PANDA only accepts data in .csv or Excel, however I've found that it likes .csv better. (csv=comma separated values text file). It particularly does not work well with Excel files that have more than one worksheet -- there's no way to tell PANDA which sheet to pull in. If you have to make any alterations (as noted below), I'd recommend first saving a copy of your spreadsheet or CSV file, as a backup.</p>
<p>If you have an Excel file and you want to convert it to CSV.  In Excel, go to the File menu and choose "Save As" and choose "CSV (comma-delimited) (*.csv)" from the "Save as Type" pull-down menu.  If your Excel file has more than one worksheet, be sure to be viewing the sheet you want to export when you run the Save As. It will only export that one sheet.</p>
<p>Other things to keep in mind:</p>
<ul>
<li>PANDA doesn't seem to like strange characters. For example, it balked at "protégé"  but switching it to plain "e" letters worked.</li> 
<li>Make sure all columns have a header/label</li>
<li>Make sure your column headings are relatively basic and only contain letters, numbers or underscore (no symbols). I like to use camel-case for my field names such as "LastName", "PropertyType", "InspectDate", etc.</li>
<li>Make sure there are no blank rows, or other extraneous information in your sheet. For example, sometimes agencies add a "total" at the bottom of a spreadsheet, or they put some notes or info at the very top of the sheet. Take those out before trying to import.</li>
<li>Get rid of any formulas in your spreadsheet. Copy the column that has the formulas and then right-mouse click and choose "Paste Special" and then choose "Values" to get rid of the formulas (it will leave just the answers)</li>
</ul>

<p>In PANDA, click on "Upload" at the top of the page</p>
<p>Click the "Choose File" button and navigate to your CSV or Excel file. Then click "Begin Upload"</p>
<p>It will then give you a chance to change the name of your dataset and to give it a description and to pick a category that it falls into (if you don't see an appropriate category, talk to MaryJo about getting a new category added)</p>
<p>Click Continue and you'll get a preview of your data. If all looks okay, click "finish"</p>
<p>It will send you an email when the import is finished. If it's a big dataset or if somebody else is importing or exporting or indexing data, your job will be delayed until those other things are finished (first come, first serve basis)</p>
<p>If you want to be able to search the dataset you just uploaded on specific fields, you need to "enable column search" when the import is finished. On the page for that dataset (if you're lost, go to "Find a dataset" and navigate to the dataset you want), you'll see a "Actions" button that has these options. Click on "Enable column search" and it will bring up a pop-up window with the fields that are in that dataset. You'll see in this screen grab that there are check marks next to several fields -- these fields have already been "enabled" for column search. Your new dataset will not have any check marks. Check the boxes for the fields you want to be able to search on, then be sure the data type is set properly (i.e. "number" for a year field, "date and time" for a date field, "text" for most everything else) Then click on "Make columns searchable." It will start "reindexing" the dataset. This will take longer than the import and PANDA will send you an email when it's done.  If some fields have already been enabled, but you want to add more, you follow this same process.</p>

<p>Adding data to an existing dataset:</p>
<p>Let's say that you just got a new batch of salary records for Dakota County and you want to add it to PANDA. If you look at the Dakota County file that is there right now, it covers 2010 to 2014 -- all in one dataset. So it seems logical that you might want to add the 2015 data to it.</p>
<p>The big caveat here is that the structure of the new file needs to match the existing PANDA file EXACTLY! This means that the fields need to be in the same order and have the same column names/headers. Any variation and PANDA will reject it. </p>
<p>One recommendation that can help you is to first export a chunk of data from the existing dataset so you can get the headers and then make sure your new data uses those same headers, in that same order.</p>
<p>If you do get it to match, go to the dataset page (if you're lost, go to "Find a dataset" and navigate to the dataset you want) and go to the bottom of the metadata. You'll see a section called "Data files". Then the uploading process is the same as the previous one.</p>
<p>If you realize you screwed up after adding data, note that there's a garbage can image next to each of the data files. You can use that to delete a particular chunk of what you uploaded (without deleting the whole dataset)</p>



		</section>


        
      </div>
    </div>
  </body>
</html>